<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Game - Indefinite Integrals</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: #f0f2f5;
            color: #333;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        #quiz-container {
            background-color: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 700px;
            padding: 30px;
            box-sizing: border-box;
        }
        #question-container {
            margin-bottom: 20px;
        }
        #question-text {
            font-size: 1.5em;
            font-weight: 600;
            margin-bottom: 25px;
            line-height: 1.4;
        }
        .option-btn {
            display: block;
            width: 100%;
            padding: 15px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #f9f9f9;
            font-size: 1em;
            text-align: left;
            cursor: pointer;
            transition: background-color 0.3s, border-color 0.3s;
        }
        .option-btn:hover {
            background-color: #f0f0f0;
            border-color: #ccc;
        }
        .option-btn.correct {
            background-color: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
        }
        .option-btn.incorrect {
            background-color: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
        }
        #feedback-container {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            font-size: 1.1em;
            display: none;
            border: 1px solid transparent;
        }
        #feedback-container.correct {
            background-color: #e2f0e5;
            border-color: #c3e6cb;
            color: #155724;
            display: block;
        }
        #feedback-container.incorrect {
            background-color: #fbe4e6;
            border-color: #f5c6cb;
            color: #721c24;
            display: block;
        }
        #controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 25px;
        }
        #next-btn, #restart-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            background-color: #007bff;
            color: white;
            font-size: 1em;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        #next-btn:hover, #restart-btn:hover {
            background-color: #0056b3;
        }
        #restart-btn {
            background-color: #6c757d;
            display: none;
        }
        #progress-text {
            font-size: 1em;
            font-weight: 500;
        }
        #score-container {
            text-align: center;
            display: none;
        }
        #score-text {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>

<div id="quiz-container">
    <div id="question-container">
        <div id="question-text"></div>
        <div id="options-container"></div>
    </div>
    <div id="feedback-container"></div>
    <div id="controls">
        <span id="progress-text"></span>
        <button id="next-btn">Next</button>
    </div>
    <div id="score-container">
        <div id="score-text"></div>
        <button id="restart-btn">Restart Quiz</button>
    </div>
</div>

<script>
    const questions = [
        {
            question: "What is an antiderivative of a function $f(x)$?",
            options: [
                "A function $F(x)$ such that $F(x) = f'(x)$.",
                "A function $F(x)$ such that $F'(x) = f(x)$.",
                "The area under the curve of $f(x)$.",
                "The slope of the tangent line to $f(x)$."
            ],
            correct: 1,
            explanation: "A function $F(x)$ is an antiderivative of $f(x)$ if the derivative of $F(x)$ is $f(x)$. This is the fundamental definition of the reverse process of differentiation."
        },
        {
            question: "If $F(x)$ is an antiderivative of $f(x)$, which of the following is also an antiderivative of $f(x)$?",
            options: [
                "$F(x) + C$, where $C$ is any constant.",
                "$C \\cdot F(x)$, where $C$ is any constant.",
                "$F(x+C)$, where $C$ is any constant.",
                "Only $F(x)$ is an antiderivative."
            ],
            correct: 0,
            explanation: "The derivative of any constant $C$ is zero. Therefore, $(F(x) + C)' = F'(x) + 0 = f(x)$. This means there is an infinite family of antiderivatives for any function, all differing by a constant. This constant is called the constant of integration."
        },
        {
            question: "What is the indefinite integral $\\int 3x^2 \\,dx$?",
            options: [
                "$6x + C$",
                "$x^3 + C$",
                "$\\frac{3}{2}x^3 + C$",
                "$3x^2 + C$"
            ],
            correct: 1,
            explanation: "Using the power rule for integration, $\\int x^n \\,dx = \\frac{x^{n+1}}{n+1} + C$. Here, $n=2$, so $\\int 3x^2 \\,dx = 3 \\cdot \\frac{x^{2+1}}{2+1} + C = 3 \\cdot \\frac{x^3}{3} + C = x^3 + C$."
        },
        {
            question: "Which property allows us to write $\\int (f(x) + g(x)) \\,dx$ as $\\int f(x) \\,dx + \\int g(x) \\,dx$?",
            options: [
                "The product rule of integration.",
                "The chain rule of integration.",
                "The linearity property of integrals.",
                "The substitution method."
            ],
            correct: 2,
            explanation: "The linearity property states that the integral of a sum of functions is the sum of their integrals. This is a direct consequence of the linearity of the derivative operator."
        },
        {
            question: "Calculate the integral $\\int (\\cos(x) - e^x) \\,dx$.",
            options: [
                "$\\sin(x) - e^x + C$",
                "$-\\sin(x) - e^x + C$",
                "$\\sin(x) - \\ln(x) + C$",
                "$\\cos(x) - e^x + C$"
            ],
            correct: 0,
            explanation: "We integrate term by term. The integral of $\\cos(x)$ is $\\sin(x)$, and the integral of $e^x$ is $e^x$. Therefore, $\\int (\\cos(x) - e^x) \\,dx = \\sin(x) - e^x + C$."
        },
        {
            question: "The method of integration by parts is derived from which differentiation rule?",
            options: [
                "The Chain Rule",
                "The Quotient Rule",
                "The Power Rule",
                "The Product Rule"
            ],
            correct: 3,
            explanation: "The product rule for differentiation is $(uv)' = u'v + uv'$. Integrating both sides gives $uv = \\int u'v \\,dx + \\int uv' \\,dx$. Rearranging this yields the integration by parts formula: $\\int uv' \\,dx = uv - \\int u'v \\,dx$."
        },
        {
            question: "Using integration by parts, what is $\\int x e^x \\,dx$?",
            options: [
                "$e^x + C$",
                "$x e^x - e^x + C$",
                "$\\frac{1}{2}x^2 e^x + C$",
                "$x e^x + C$"
            ],
            correct: 1,
            explanation: "Let $u=x$ and $dv=e^x \\,dx$. Then $du=dx$ and $v=e^x$. Using the formula $\\int u \\,dv = uv - \\int v \\,du$, we get $x e^x - \\int e^x \\,dx = x e^x - e^x + C$."
        },
        {
            question: "The method of integration by substitution is the reverse of which differentiation rule?",
            options: [
                "The Product Rule",
                "The Chain Rule",
                "The Quotient Rule",
                "The Constant Multiple Rule"
            ],
            correct: 1,
            explanation: "Integration by substitution is used for integrals of the form $\\int f(g(x))g'(x) \\,dx$. This form is the result of applying the chain rule to differentiate a composite function. The substitution $u=g(x)$ reverses this process."
        },
        {
            question: "To solve $\\int 2x \\sqrt{x^2+1} \\,dx$, what is the most appropriate substitution?",
            options: [
                "$u = 2x$",
                "$u = x^2$",
                "$u = x^2+1$",
                "$u = \\sqrt{x}$"
            ],
            correct: 2,
            explanation: "Let $u = x^2+1$. Then the differential is $du = 2x \\,dx$. This perfectly replaces the remaining parts of the integrand, transforming the integral into the much simpler $\\int \\sqrt{u} \\,du$."
        },
        {
            question: "Calculate $\\int \\frac{1}{x} \\,dx$.",
            options: [
                "$\\ln|x| + C$",
                "$\\frac{1}{x^2} + C$",
                "$1 + C$",
                "$- \\frac{1}{x^2} + C$"
            ],
            correct: 0,
            explanation: "The derivative of $\\ln(x)$ is $1/x$. We use the absolute value, $\\ln|x|$, because the domain of $1/x$ includes negative numbers, while the domain of $\\ln(x)$ is only positive numbers."
        },
        {
            question: "What is the integral $\\int \\sin(3x) \\,dx$?",
            options: [
                "$\\cos(3x) + C$",
                "$3\\cos(3x) + C$",
                "$-\\frac{1}{3}\\cos(3x) + C$",
                "$-3\\cos(3x) + C$"
            ],
            correct: 2,
            explanation: "Use substitution with $u=3x$, so $du=3\\,dx$, or $dx = du/3$. The integral becomes $\\int \\sin(u) \\frac{du}{3} = \\frac{1}{3} \\int \\sin(u) \\,du = -\\frac{1}{3}\\cos(u) + C = -\\frac{1}{3}\\cos(3x) + C$."
        },
        {
            question: "Find the integral $\\int \\frac{e^x}{e^x+1} \\,dx$.",
            options: [
                "$\\ln|e^x+1| + C$",
                "$\\frac{e^x}{(e^x+1)^2} + C$",
                "$e^x \\ln|e^x+1| + C$",
                "$\\arctan(e^x) + C$"
            ],
            correct: 0,
            explanation: "Use substitution with $u = e^x+1$. Then $du = e^x \\,dx$. The integral becomes $\\int \\frac{1}{u} \\,du = \\ln|u| + C$. Substituting back gives $\\ln|e^x+1| + C$."
        },
        {
            question: "What is the result of $\\int \\frac{x^2+x+1}{x} \\,dx$?",
            options: [
                "$\\frac{x^3/3 + x^2/2 + x}{x^2/2} + C$",
                "$\\frac{1}{2}x^2 + x + \\ln|x| + C$",
                "$x+1 + C$",
                "$\\ln|x^2+x+1| + C$"
            ],
            correct: 1,
            explanation: "First, simplify the integrand by dividing each term by $x$: $\\frac{x^2}{x} + \\frac{x}{x} + \\frac{1}{x} = x + 1 + \\frac{1}{x}$. Now integrate term by term: $\\int (x + 1 + \\frac{1}{x}) \\,dx = \\frac{x^2}{2} + x + \\ln|x| + C$."
        },
        {
            question: "To calculate $\\int x \\sin(x) \\,dx$ using integration by parts, what is a good choice for $u$ and $dv$?",
            options: [
                "$u = \\sin(x)$, $dv = x \\,dx$",
                "$u = x \\sin(x)$, $dv = dx$",
                "$u = x$, $dv = \\sin(x) \\,dx$",
                "This cannot be solved by parts."
            ],
            correct: 2,
            explanation: "Let $u=x$ and $dv=\\sin(x)\\,dx$. This is a good choice because the derivative of $u$ is $du=dx$ (simpler), and the integral of $dv$ is $v=-\\cos(x)$ (not more complex). The alternative, $u=\\sin(x)$, would lead to a more complicated integral."
        },
        {
            question: "Following the previous question, what is the result of $\\int x \\sin(x) \\,dx$?",
            options: [
                "$-x \\cos(x) + \\sin(x) + C$",
                "$x \\cos(x) - \\sin(x) + C$",
                "$\\frac{1}{2}x^2 \\cos(x) + C$",
                "$-x \\cos(x) - \\sin(x) + C$"
            ],
            correct: 0,
            explanation: "With $u=x$ and $dv=\\sin(x)\\,dx$, we have $du=dx$ and $v=-\\cos(x)$. The formula gives $uv - \\int v \\,du = x(-\\cos(x)) - \\int (-\\cos(x)) \\,dx = -x \\cos(x) + \\int \\cos(x) \\,dx = -x \\cos(x) + \\sin(x) + C$."
        },
        {
            question: "What is the indefinite integral of $f(x) = \\frac{1}{1+x^2}$?",
            options: [
                "$\\ln(1+x^2) + C$",
                "$\\arctan(x) + C$",
                "$\\frac{-2x}{(1+x^2)^2} + C$",
                "$\\arcsin(x) + C$"
            ],
            correct: 1,
            explanation: "This is a standard integral form. The derivative of $\\arctan(x)$ is $\\frac{1}{1+x^2}$, so the indefinite integral is $\\arctan(x) + C$."
        },
        {
            question: "Calculate $\\int \\ln(x) \\,dx$. (Hint: Use integration by parts with $u=\\ln(x)$).",
            options: [
                "$\\frac{1}{x} + C$",
                "$x \\ln(x) - x + C$",
                "$\\frac{(\\ln(x))^2}{2} + C$",
                "$x \\ln(x) + x + C$"
            ],
            correct: 1,
            explanation: "Let $u=\\ln(x)$ and $dv=dx$. Then $du = \\frac{1}{x}dx$ and $v=x$. Using integration by parts: $uv - \\int v \\,du = \\ln(x) \\cdot x - \\int x \\cdot \\frac{1}{x} \\,dx = x\\ln(x) - \\int 1 \\,dx = x\\ln(x) - x + C$."
        },
        {
            question: "The expression $\\int f(x) \\,dx$ represents:",
            options: [
                "A single function.",
                "A specific numerical value.",
                "A family of functions.",
                "The derivative of $f(x)$."
            ],
            correct: 2,
            explanation: "The indefinite integral represents a family of functions, where each function is an antiderivative of $f(x)$. They all differ by a constant value, $C$."
        },
        {
            question: "Find the integral $\\int (x-1)^2 \\,dx$.",
            options: [
                "$\\frac{(x-1)^3}{3} + C$",
                "$2(x-1) + C$",
                "$\\frac{1}{2}x^2 - x + C$",
                "$(x-1)^3 + C$"
            ],
            correct: 0,
            explanation: "You can use substitution with $u=x-1$, so $du=dx$. The integral becomes $\\int u^2 \\,du = \\frac{u^3}{3} + C = \\frac{(x-1)^3}{3} + C$. Alternatively, you can expand $(x-1)^2 = x^2 - 2x + 1$ and integrate term by term."
        },
        {
            question: "What is the process of finding an indefinite integral called?",
            options: [
                "Differentiation",
                "Integration or Antidifferentiation",
                "Limit evaluation",
                "Function composition"
            ],
            correct: 1,
            explanation: "The process of finding the family of antiderivatives for a function is known as integration or, more specifically, antidifferentiation."
        }
    ];


    let currentQuestionIndex = 0;
    let score = 0;
    let answered = false;

    const questionTextElem = document.getElementById('question-text');
    const optionsContainerElem = document.getElementById('options-container');
    const feedbackContainerElem = document.getElementById('feedback-container');
    const nextBtn = document.getElementById('next-btn');
    const restartBtn = document.getElementById('restart-btn');
    const progressTextElem = document.getElementById('progress-text');
    const scoreContainerElem = document.getElementById('score-container');
    const scoreTextElem = document.getElementById('score-text');
    const questionContainerElem = document.getElementById('question-container');
    const controlsElem = document.getElementById('controls');

    function loadQuestion() {
        answered = false;
        feedbackContainerElem.style.display = 'none';
        optionsContainerElem.innerHTML = '';
        
        const question = questions[currentQuestionIndex];
        questionTextElem.innerHTML = question.question;
        
        question.options.forEach((option, index) => {
            const button = document.createElement('button');
            button.innerHTML = option;
            button.classList.add('option-btn');
            button.addEventListener('click', () => selectAnswer(index, button));
            optionsContainerElem.appendChild(button);
        });

        progressTextElem.innerText = `Question ${currentQuestionIndex + 1} of ${questions.length}`;
        MathJax.typesetPromise();
    }

    function selectAnswer(selectedIndex, button) {
        if (answered) return;
        answered = true;

        const question = questions[currentQuestionIndex];
        const correctIndex = question.correct;

        if (selectedIndex === correctIndex) {
            score++;
            button.classList.add('correct');
            feedbackContainerElem.innerHTML = `<strong>Correct!</strong><br>${question.explanation}`;
            feedbackContainerElem.className = 'feedback-container correct';
        } else {
            button.classList.add('incorrect');
            optionsContainerElem.children[correctIndex].classList.add('correct');
            feedbackContainerElem.innerHTML = `<strong>Incorrect.</strong><br>${question.explanation}`;
            feedbackContainerElem.className = 'feedback-container incorrect';
        }
    }

    function showScore() {
        questionContainerElem.style.display = 'none';
        controlsElem.style.display = 'none';
        feedbackContainerElem.style.display = 'none';
        scoreContainerElem.style.display = 'block';
        restartBtn.style.display = 'block';
        scoreTextElem.innerText = `Your Score: ${score} out of ${questions.length}`;
    }

    nextBtn.addEventListener('click', () => {
        if (!answered && currentQuestionIndex < questions.length) {
            alert("Please select an answer before proceeding.");
            return;
        }
        currentQuestionIndex++;
        if (currentQuestionIndex < questions.length) {
            loadQuestion();
        } else {
            showScore();
        }
    });

    restartBtn.addEventListener('click', () => {
        currentQuestionIndex = 0;
        score = 0;
        questionContainerElem.style.display = 'block';
        controlsElem.style.display = 'flex';
        scoreContainerElem.style.display = 'none';
        restartBtn.style.display = 'none';
        loadQuestion();
    });

    loadQuestion();
</script>

</body>
</html>
