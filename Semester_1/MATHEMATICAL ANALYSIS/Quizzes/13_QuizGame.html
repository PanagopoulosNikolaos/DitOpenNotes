<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Game - Complex Numbers</title>
    <!-- MathJax Configuration -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        /* Overall Theme & Backgrounds */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: #363530; /* Dark grey page background */
            color: #f0f2f5; /* Light text for readability */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        /* Containers Styling */
        .quiz-container {
            background-color: #857c7c; /* Lighter muted grey container */
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
            width: 100%;
            max-width: 800px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* Header with Gradient */
        .quiz-header {
            background-image: linear-gradient(45deg, #4f46e5, #7c3aed); /* Blue -> Purple gradient */
            color: white;
            padding: 24px;
            text-align: center;
        }
        .quiz-header h1 {
            margin: 0;
            font-size: 1.8em;
        }

        /* Main Quiz Body */
        .quiz-body {
            padding: 24px;
        }
        #question-container {
            margin-bottom: 20px;
        }
        #question-text {
            font-size: 1.4em;
            font-weight: 600;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        /* Options Grid & Buttons */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
        }
        .option-btn {
            width: 100%;
            padding: 15px;
            font-size: 1.1em;
            text-align: left;
            color: #f0f2f5;
            background-color: #6b6464; /* Darker grey for options */
            border: 1px solid #9e9696;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s, border-color 0.2s;
        }
        .option-btn:hover:not(:disabled) {
            background-color: #7d7575;
            border-color: #b1a8a8;
        }

        /* Button Feedback Colors */
        .option-btn.correct {
            background-color: #10b981; /* Bright green for correct */
            border-color: #0f9a6d;
            color: white;
        }
        .option-btn.incorrect {
            background-color: #ef4444; /* Bright red for incorrect */
            border-color: #d83a3a;
            color: white;
        }
        .option-btn:disabled {
            cursor: not-allowed;
            opacity: 0.9;
        }

        /* Explanation/Feedback Box */
        #feedback-container {
            margin-top: 20px;
        }
        #explanation {
            display: none;
            padding: 15px;
            border-radius: 8px;
            font-size: 1.1em;
            line-height: 1.6;
            background-color: #4a4843; /* Darker background for explanation */
            border: 1px solid #6b6464;
        }

        /* Footer and Navigation */
        .quiz-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 24px;
            background-color: #857c7c; /* Lighter muted grey footer */
            border-top: 1px solid #9e9696;
        }
        #progress-text {
            font-size: 1em;
            color: #d1d5db; /* Lighter grey for secondary text */
        }
        .nav-btn {
            padding: 12px 24px;
            font-size: 1em;
            font-weight: bold;
            color: white;
            background-color: #4f46e5; /* Vibrant blue for actions */
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .nav-btn:hover:not(:disabled) {
            background-color: #4338ca;
        }
        .nav-btn:disabled {
            background-color: #52504b;
            cursor: not-allowed;
        }
        #navigation-buttons {
            display: flex;
            gap: 10px;
        }
        
        /* Results Screen */
        #results-container {
            text-align: center;
            padding: 40px 24px;
        }
        #results-container h2 {
            font-size: 2em;
            margin-bottom: 20px;
        }
        #score-text {
            font-size: 1.5em;
            margin-bottom: 30px;
        }
        #restart-btn {
            padding: 15px 30px;
            font-size: 1.2em;
            font-weight: bold;
            color: white;
            background-color: #4f46e5; /* Vibrant blue for actions */
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        #restart-btn:hover {
            background-color: #4338ca;
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <div class="quiz-header">
            <h1>Quiz Game: Complex Numbers</h1>
        </div>
        <div class="quiz-body">
            <div id="question-container" style="display: none;">
                <p id="question-text"></p>
                <div id="options-grid" class="options-grid"></div>
                <div id="feedback-container">
                    <div id="explanation"></div>
                </div>
            </div>
            <div id="results-container" style="display: none;">
                <h2>Quiz Complete!</h2>
                <p id="score-text"></p>
                <button id="restart-btn" class="nav-btn">Restart Quiz</button>
            </div>
        </div>
        <div class="quiz-footer" style="display: none;">
            <p id="progress-text"></p>
            <div id="navigation-buttons">
                <button id="prev-btn" class="nav-btn">Previous</button>
                <button id="next-btn" class="nav-btn">Next</button>
            </div>
        </div>
    </div>

    <script>
        const questions = [
            { question: "What is the value of the imaginary unit \\(i\\) squared, i.e., \\(i^2\\)?", options: ["1", "-1", "\\(i\\)", "\\(-i\\)"], correct: 1, explanation: "The imaginary unit \\(i\\) is defined as the square root of -1, so by definition, \\(i^2 = -1\\)." },
            { question: "What is the value of \\(i^3\\)?", options: ["1", "-1", "\\(i\\)", "\\(-i\\)"], correct: 3, explanation: "\\(i^3 = i^2 \\cdot i = (-1) \\cdot i = -i\\). The powers of \\(i\\) cycle through \\(i, -1, -i, 1\\)." },
            { question: "For the complex number \\(z = 5 - 3i\\), what are the real part \\(Re(z)\\) and imaginary part \\(Im(z)\\)?", options: ["\\(Re(z)=5, Im(z)=-3\\)", "\\(Re(z)=5, Im(z)=3\\)", "\\(Re(z)=-3, Im(z)=5\\)", "\\(Re(z)=5, Im(z)=-3i\\)"], correct: 0, explanation: "In a complex number \\(z = a + bi\\), the real part is \\(a\\) and the imaginary part is \\(b\\). The imaginary part does not include the \\(i\\)." },
            { question: "What is the sum of \\((2+4i)\\) and \\((3-i)\\)?", options: ["\\(5+5i\\)", "\\(5+3i\\)", "\\(-1+5i\\)", "\\(-1+3i\\)"], correct: 1, explanation: "To add complex numbers, add the real parts and the imaginary parts separately: \\((2+3) + (4-1)i = 5+3i\\)." },
            { question: "What is the product of \\((1+2i)\\) and \\((3-i)\\)?", options: ["\\(3-2i\\)", "\\(1+5i\\)", "\\(5+5i\\)", "\\(3+5i\\)"], correct: 2, explanation: "Use the distributive property (FOIL): \\((1)(3) + (1)(-i) + (2i)(3) + (2i)(-i) = 3 - i + 6i - 2i^2 = 3 + 5i - 2(-1) = 3 + 5i + 2 = 5+5i\\)." },
            { question: "What is the complex conjugate of \\(z = 7 - 2i\\)?", options: ["\\(-7 - 2i\\)", "\\(-7 + 2i\\)", "\\(7 + 2i\\)", "\\(2 - 7i\\)"], correct: 2, explanation: "The complex conjugate, denoted \\(\\bar{z}\\), is found by changing the sign of the imaginary part. So, the conjugate of \\(7 - 2i\\) is \\(7 + 2i\\)." },
            { question: "What is the result of multiplying a complex number \\(z = a+bi\\) by its conjugate \\(\\bar{z}\\)?", options: ["\\(a^2 - b^2\\)", "\\(a^2 + b^2\\)", "\\(a^2 + b^2 + 2abi\\)", "0"], correct: 1, explanation: "\\(z\\bar{z} = (a+bi)(a-bi) = a^2 - (bi)^2 = a^2 - b^2i^2 = a^2 - b^2(-1) = a^2 + b^2\\). The result is always a non-negative real number." },
            { question: "How do you perform the division \\(\\frac{3+2i}{1-i}\\)?", options: ["Divide the real parts and the imaginary parts separately.", "Multiply the numerator and denominator by \\(i\\).", "Multiply the numerator and denominator by the conjugate of the denominator.", "It's not possible to divide complex numbers."], correct: 2, explanation: "To divide, we make the denominator real by multiplying the top and bottom by its conjugate, which is \\(1+i\\)." },
            { question: "Calculate the division \\(\\frac{3+2i}{1-i}\\).", options: ["\\(\\frac{1}{2} + \\frac{5}{2}i\\)", "\\(1+5i\\)", "\\(5+i\\)", "\\(\\frac{5}{2} + \\frac{1}{2}i\\)"], correct: 0, explanation: "\\(\\frac{3+2i}{1-i} = \\frac{(3+2i)(1+i)}{(1-i)(1+i)} = \\frac{3+3i+2i+2i^2}{1^2+1^2} = \\frac{3+5i-2}{2} = \\frac{1+5i}{2} = \\frac{1}{2} + \\frac{5}{2}i\\)." },
            { question: "What is the modulus (or absolute value) of the complex number \\(z = 3 - 4i\\)?", options: ["5", "7", "25", "\\(\\sqrt{7}\\)"], correct: 0, explanation: "The modulus \\(|z|\\) is the distance from the origin in the complex plane. It's calculated as \\(|z| = \\sqrt{a^2+b^2} = \\sqrt{3^2 + (-4)^2} = \\sqrt{9+16} = \\sqrt{25} = 5\\)." },
            { question: "What are the roots of the equation \\(x^2 + 9 = 0\\)?", options: ["\\(x=3\\) and \\(x=-3\\)", "\\(x=3i\\) and \\(x=-3i\\)", "\\(x=9i\\) and \\(x=-9i\\)", "There are no roots."], correct: 1, explanation: "\\(x^2 = -9\\), so \\(x = \\pm\\sqrt{-9} = \\pm\\sqrt{9 \\cdot -1} = \\pm\\sqrt{9}\\sqrt{-1} = \\pm 3i\\)." },
            { question: "If a polynomial has real coefficients and \\(2+5i\\) is one of its roots, what must another root be?", options: ["\\(2-5i\\)", "\\(-2+5i\\)", "\\(-2-5i\\)", "It cannot be determined."], correct: 0, explanation: "The Complex Conjugate Root Theorem states that if a polynomial has real coefficients, its complex roots must occur in conjugate pairs. Therefore, \\(2-5i\\) must also be a root." },
            { question: "In the polar form \\(z = r(\\cos\\phi + i\\sin\\phi)\\), what does \\(r\\) represent?", options: ["The real part of z", "The imaginary part of z", "The argument of z", "The modulus of z"], correct: 3, explanation: "\\(r\\) is the modulus of the complex number, representing its distance from the origin. \\(\\phi\\) is the argument, representing the angle." },
            { question: "Euler's formula states that \\(e^{i\\phi}\\) is equal to:", options: ["\\(\\cos\\phi + i\\sin\\phi\\)", "\\(\\sin\\phi + i\\cos\\phi\\)", "\\(r(\\cos\\phi + i\\sin\\phi)\\)", "\\(\\cos(i\\phi) + \\sin(i\\phi)\\)"], correct: 0, explanation: "Euler's formula provides a fundamental link between exponential functions and trigonometric functions in the complex plane: \\(e^{i\\phi} = \\cos\\phi + i\\sin\\phi\\)." },
            { question: "Convert the complex number \\(z=1+i\\) to polar form \\(r(\\cos\\phi + i\\sin\\phi)\\).", options: ["\\(r=\\sqrt{2}, \\phi=\\pi/4\\)", "\\(r=2, \\phi=\\pi/4\\)", "\\(r=\\sqrt{2}, \\phi=\\pi/2\\)", "\\(r=1, \\phi=\\pi/4\\)"], correct: 0, explanation: "The modulus is \\(r = \\sqrt{1^2+1^2} = \\sqrt{2}\\). The angle is \\(\\phi = \\arctan(1/1) = \\pi/4\\) (since the point is in the first quadrant). So, \\(z = \\sqrt{2}(\\cos(\\pi/4) + i\\sin(\\pi/4))\\)." },
            { question: "Convert the complex number \\(z = 2e^{i\\pi/3}\\) from exponential to Cartesian form \\(a+bi\\).", options: ["\\(1 + i\\sqrt{3}\\)", "\\(\\sqrt{3} + i\\)", "\\(2 + i\\sqrt{3}\\)", "\\(1 - i\\sqrt{3}\\)"], correct: 0, explanation: "\\(z = 2(\\cos(\\pi/3) + i\\sin(\\pi/3))\\). Since \\(\\cos(\\pi/3) = 1/2\\) and \\(\\sin(\\pi/3) = \\sqrt{3}/2\\), we have \\(z = 2(1/2 + i\\sqrt{3}/2) = 1 + i\\sqrt{3}\\)." },
            { question: "According to De Moivre's Theorem, what is \\([r(\\cos\\phi + i\\sin\\phi)]^n\\)?", options: ["\\(r^n(\\cos\\phi + i\\sin\\phi)\\)", "\\(r(\\cos(n\\phi) + i\\sin(n\\phi))\\)", "\\(r^n(\\cos(n\\phi) + i\\sin(n\\phi))\\)", "\\(r^n(\\cos^n\\phi + i\\sin^n\\phi)\\)"], correct: 2, explanation: "De Moivre's Theorem provides a simple way to calculate powers of complex numbers: raise the modulus to the power \\(n\\) and multiply the argument by \\(n\\)." },
            { question: "Use De Moivre's Theorem to calculate \\((1+i)^4\\).", options: ["4", "-4", "\\(4i\\)", "\\(-4i\\)"], correct: 1, explanation: "First, convert \\(1+i\\) to polar form: \\(z = \\sqrt{2}(\\cos(\\pi/4) + i\\sin(\\pi/4))\\). Then, \\(z^4 = (\\sqrt{2})^4(\\cos(4\\cdot\\pi/4) + i\\sin(4\\cdot\\pi/4)) = 4(\\cos(\\pi) + i\\sin(\\pi)) = 4(-1 + 0i) = -4\\)." },
            { question: "The set of real numbers \\(\\mathbb{R}\\) is a subset of the set of complex numbers \\(\\mathbb{C}\\).", options: ["True", "False"], correct: 0, explanation: "True. Any real number \\(a\\) can be written as a complex number with a zero imaginary part, \\(a + 0i\\). Therefore, \\(\\mathbb{R} \\subset \\mathbb{C}\\)." },
            { question: "What is the geometric effect of multiplying a complex number \\(z\\) by \\(i\\)?", options: ["It reflects \\(z\\) across the real axis.", "It rotates \\(z\\) by 90 degrees (\\(\\pi/2\\) radians) counter-clockwise.", "It doubles the modulus of \\(z\\).", "It rotates \\(z\\) by 180 degrees (\\(\\pi\\) radians)."], correct: 1, explanation: "In polar form, \\(i = e^{i\\pi/2}\\). Multiplying \\(z = re^{i\\phi}\\) by \\(i\\) gives \\(z \\cdot i = re^{i\\phi}e^{i\\pi/2} = re^{i(\\phi+\\pi/2)}\\). This increases the angle by \\(\\pi/2\\), which is a 90-degree counter-clockwise rotation." }
        ];

        const questionContainer = document.getElementById('question-container');
        const questionText = document.getElementById('question-text');
        const optionsGrid = document.getElementById('options-grid');
        const explanation = document.getElementById('explanation');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const progressText = document.getElementById('progress-text');
        const resultsContainer = document.getElementById('results-container');
        const scoreText = document.getElementById('score-text');
        const restartBtn = document.getElementById('restart-btn');
        const quizFooter = document.querySelector('.quiz-footer');

        let currentQuestionIndex = 0;
        let userAnswers = [];

        function startQuiz() {
            currentQuestionIndex = 0;
            userAnswers = new Array(questions.length).fill(null);
            resultsContainer.style.display = 'none';
            questionContainer.style.display = 'block';
            quizFooter.style.display = 'flex';
            showQuestion();
        }

        function showQuestion() {
            resetState();
            const question = questions[currentQuestionIndex];
            questionText.innerHTML = question.question;
            
            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.innerHTML = option;
                button.classList.add('option-btn');
                button.dataset.index = index;
                button.addEventListener('click', selectAnswer);
                optionsGrid.appendChild(button);
            });
            
            updateNavigation();
            restoreAnswerState();
            MathJax.typesetPromise();
        }
        
        function resetState() {
            while (optionsGrid.firstChild) {
                optionsGrid.removeChild(optionsGrid.firstChild);
            }
            explanation.style.display = 'none';
        }

        function updateNavigation() {
            progressText.innerText = `Question ${currentQuestionIndex + 1} of ${questions.length}`;
            prevBtn.disabled = currentQuestionIndex === 0;
            nextBtn.innerText = currentQuestionIndex === questions.length - 1 ? 'Finish' : 'Next';
        }

        function restoreAnswerState() {
            const userAnswer = userAnswers[currentQuestionIndex];
            if (userAnswer !== null) {
                showFeedback(userAnswer);
            }
        }

        function selectAnswer(e) {
            const selectedIndex = parseInt(e.target.dataset.index);
            if (userAnswers[currentQuestionIndex] === null) { // Only process if it's the first time answering
                userAnswers[currentQuestionIndex] = selectedIndex;
                showFeedback(selectedIndex);
            }
        }

        function showFeedback(selectedIndex) {
            const correctIndex = questions[currentQuestionIndex].correct;
            
            Array.from(optionsGrid.children).forEach((button, index) => {
                if (index === correctIndex) {
                    button.classList.add('correct');
                } else if (index === selectedIndex) {
                    button.classList.add('incorrect');
                }
                button.disabled = true;
            });
            
            explanation.innerHTML = "<b>Explanation:</b> " + questions[currentQuestionIndex].explanation;
            explanation.style.display = 'block';
            MathJax.typesetPromise();
        }

        function showResults() {
            let score = 0;
            userAnswers.forEach((answer, index) => {
                if (answer === questions[index].correct) {
                    score++;
                }
            });

            questionContainer.style.display = 'none';
            quizFooter.style.display = 'none';
            resultsContainer.style.display = 'block';
            const scorePercent = Math.round((score / questions.length) * 100);
            scoreText.innerText = `You scored ${score} out of ${questions.length} (${scorePercent}%)`;
        }

        function handleNextButton() {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                showQuestion();
            } else {
                showResults();
            }
        }
        
        function handlePrevButton() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion();
            }
        }

        nextBtn.addEventListener('click', handleNextButton);
        prevBtn.addEventListener('click', handlePrevButton);
        restartBtn.addEventListener('click', startQuiz);

        startQuiz();
    </script>
</body>
</html>